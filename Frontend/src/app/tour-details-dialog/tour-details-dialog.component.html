

<h2 mat-dialog-title>Tour-Details</h2>

<mat-dialog-content style="min-width: 300px; padding-bottom: 1rem;">
  <p><strong>Name:</strong> {{ data.name }}</p>
  <p><strong>Start:</strong> {{ data.startLocation }}</p>
  <p><strong>Ziel:</strong> {{ data.endLocation }}</p>
  <p><strong>Transport:</strong> {{ data.transportType }}</p>
  <p><strong>Dauer:</strong> {{ data.estimatedTime }}</p>
  <p><strong>Distanz:</strong> {{ data.distance }} km</p>

  <h3>📝 Neues Tour-Log</h3>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Datum/Zeit</mat-label>
    <input matInput type="datetime-local" [(ngModel)]="newLog.logTime">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Kommentar</mat-label>
    <input matInput [(ngModel)]="newLog.comment">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
  <mat-label>Schwierigkeit</mat-label>
  <mat-select [(ngModel)]="newLog.difficulty">
    <mat-option value="leicht">Leicht</mat-option>
    <mat-option value="mittel">Mittel</mat-option>
    <mat-option value="schwer">Schwer</mat-option>
  </mat-select>
  </mat-form-field>


  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Distanz (km)</mat-label>
    <input matInput type="number" [(ngModel)]="newLog.totalDistance" min="0">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Gesamtdauer</mat-label>
    <input matInput type="time" [(ngModel)]="newLog.totalTime">
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Bewertung (1–5)</mat-label>
    <input matInput type="number" min="1" max="5" [(ngModel)]="newLog.rating">
  </mat-form-field>

<div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; gap: 0.5rem; margin-top: 1rem;">
  <button mat-flat-button color="primary" mat-dialog-close style="flex: 1 1 auto;">Schließen</button>
  <button mat-flat-button color="accent" (click)="exportAsCSV()" style="flex: 1 1 auto;">📄 Exportieren</button>
  <button mat-flat-button color="warn" (click)="deleteTour()" style="flex: 1 1 auto;">🗑️ Löschen</button>
  <button mat-flat-button color="primary" (click)="createLog()" style="flex: 1 1 auto;">➕ Log hinzufügen</button>
  <div *ngIf="!editMode">
  <button mat-flat-button color="accent" (click)="enableEdit()">✏️ Bearbeiten</button>
</div>

<div *ngIf="editMode">
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Name</mat-label>
    <input matInput [(ngModel)]="editedTour.name" />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Beschreibung</mat-label>
    <input matInput [(ngModel)]="editedTour.description" />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Start</mat-label>
    <input matInput [(ngModel)]="editedTour.startLocation" />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Ziel</mat-label>
    <input matInput [(ngModel)]="editedTour.endLocation" />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
  <mat-label>Transportmittel</mat-label>
  <mat-select [(ngModel)]="editedTour.transportType">
    <mat-option value="driving-car">Auto</mat-option>
    <mat-option value="cycling-regular">Fahrrad</mat-option>
    <mat-option value="foot-walking">Zu Fuß</mat-option>
  </mat-select>
</mat-form-field>


  <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
    <button mat-flat-button color="primary" (click)="saveChanges()">💾 Speichern</button>
    <button mat-stroked-button color="warn" (click)="editMode = false">✖️ Abbrechen</button>
  </div>
</div>

</div>


  </mat-dialog-content>
